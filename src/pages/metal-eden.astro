---
import BaseLayout from '../layouts/BaseLayout.astro';
import SideNav from '../components/SideNav.astro';
import ScrollToggle from '../components/ScrollToggle.astro';
import Lightbox from '../components/Lightbox.astro';
import siteConfig from '../content/site-config.json';

const { projects } = siteConfig;
const project = projects.metalEden;

const sections = [
  { id: 'overview', label: 'Overview' },
  { id: 'about-project', label: 'About' },
  { id: 'responsibilities', label: 'Responsibilities' },
  { id: 'environments', label: 'Environments' },
  { id: 'weapons', label: 'Weapons' },
  { id: 'props', label: '3D Art' },
  { id: 'collaboration', label: 'Collaboration' },
  { id: 'optimization', label: 'Optimization' },
];
---

<BaseLayout title={project.title} description={`Case study for ${project.title} - ${project.roles.join(', ')}`}>
  <SideNav sections={sections} />
  <ScrollToggle />
  <Lightbox />

  <main class="snap-container snap-disabled">
    <!-- Section 1: Overview / Hero -->
    <section id="overview" class="snap-section section-hero">
      <div class="section-bg">
        <img src="/images/metal-eden/hero-main.png" alt="METAL EDEN overview" loading="eager" />
      </div>
      <div class="section-overlay"></div>
      <div class="section-content">
        <h1>{project.title}</h1>
        <p class="project-roles">{project.roles.join(' · ')}</p>
      </div>
    </section>

    <!-- Section 2: About the Project -->
    <section id="about-project" class="snap-section section-about-project">
      <div class="about-project-content">
        <div class="about-project-text">
          <h2>About the Project</h2>
          <p>
            METAL EDEN is a AA sci-fi FPS developed by Reikon Games in Unreal Engine 5, requiring strong visual readability and cohesion across dense, high-velocity combat spaces.
          </p>
          <p>
            The art direction drew from Akira, Ghost in the Shell, and Metal Gear Solid, shaping those influences into a cohesive, fresh visual language.
          </p>
        </div>
        <div class="about-project-stats">
          <div class="stat-item">
            <span class="stat-value">3+ Years</span>
            <span class="stat-label">In Production</span>
          </div>
          <div class="stat-item">
            <span class="stat-value">120+ Developers</span>
            <span class="stat-label">Total Team Size</span>
          </div>
          <div class="stat-item">
            <span class="stat-value">30+ Artists</span>
            <span class="stat-label">Art Team</span>
          </div>
          <div class="stat-item">
            <span class="stat-value">Engine</span>
            <span class="stat-label">Unreal Engine 5</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Section 3: Responsibilities & Leadership -->
    <section id="responsibilities" class="snap-section section-split">
      <div class="split-content">
        <div class="split-text">
          <h2>My Responsibilities & Scope</h2>
          <ul class="responsibility-list">
            <li>Contributed to establishing and maintaining the game's art direction</li>
            <li>Level art production from blockout through final polish</li>
            <li>Weapon asset creation and ownership of the weapon production pipeline</li>
            <li>Hard-surface visual direction and production pipeline ownership</li>
            <li>Performance-aware optimization across maps and content for target platforms</li>
          </ul>
        </div>
        <div class="split-video">
          <video autoplay loop muted playsinline>
            <source src="/images/metal-eden/responsibilities-video.mp4" type="video/mp4" />
          </video>
        </div>
      </div>
    </section>

    <!-- Section 3: Environments & Level Art -->
    <section id="environments" class="snap-section section-environments">
      <div class="env-content">
        <h2>Level Art & Environment Direction</h2>
        <p class="section-description">
          Full ownership of level art production from blockout to final polish across multiple levels of the game. Responsible for the overall visual pass, including composition, design, mood, set dressing and detailing, with all decisions driven by gameplay, while guiding the team through consistent feedback.
        </p>
      </div>
      <div class="env-hero-image">
        <img src="/images/metal-eden/env-hero.png" alt="METAL EDEN environment" loading="lazy" class="zoomable" />
      </div>
      <div class="env-image-row">
        <div class="env-image-half">
          <img src="/images/metal-eden/env-left.png" alt="METAL EDEN environment" loading="lazy" class="zoomable" />
        </div>
        <div class="env-image-half">
          <img src="/images/metal-eden/env-right.png" alt="METAL EDEN environment" loading="lazy" class="zoomable" />
        </div>
      </div>
      <div class="env-archive-link">
        <a href="https://www.artstation.com/kiko_main" target="_blank" rel="noopener noreferrer">
          Full Environment and Level Art available on ArtStation →
        </a>
      </div>
    </section>

    <!-- Section 4: Weapons -->
    <section id="weapons" class="snap-section section-environments">
      <div class="env-content">
        <h2>Weapon Art</h2>
        <p class="section-description">
          Weapon asset production and pipeline ownership, balancing visual identity, gameplay readability, and real-time performance constraints.
        </p>
      </div>
      <div class="env-hero-video">
        <video autoplay loop muted playsinline>
          <source src="/images/metal-eden/weapons-hero.mp4" type="video/mp4" />
        </video>
      </div>
      <div class="env-archive-link">
        <a href="https://www.artstation.com/kiko_main" target="_blank" rel="noopener noreferrer">
          Full Weapons Art available on ArtStation →
        </a>
      </div>
    </section>

    <!-- Section 5: Props & Modular Kits -->
    <section id="props" class="snap-section section-environments">
      <div class="env-content">
        <h2>3D Art</h2>
        <p class="section-description">
          Established hard-surface visual direction and production pipelines for the team, while producing production-ready assets from initial concept art through final in-game models.
        </p>
      </div>
      <div class="env-hero-image">
        <img src="/images/metal-eden/props-hero.png" alt="METAL EDEN props" loading="lazy" class="zoomable" />
      </div>
      <div class="env-image-row">
        <div class="env-image-half">
          <img src="/images/metal-eden/props-left.png" alt="METAL EDEN props" loading="lazy" class="zoomable" />
        </div>
        <div class="env-image-half">
          <img src="/images/metal-eden/props-right.png" alt="METAL EDEN props" loading="lazy" class="zoomable" />
        </div>
      </div>
      <div class="env-archive-link">
        <a href="https://www.artstation.com/kiko_main" target="_blank" rel="noopener noreferrer">
          More props and Concept Art available on ArtStation →
        </a>
      </div>
    </section>

    <!-- Section 6: Collaboration & Leadership -->
    <section id="collaboration" class="snap-section section-environments section-compact">
      <div class="env-content">
        <h2>Collaboration & Leadership</h2>
        <ul class="collaboration-list">
          <li>Provided constant visual feedback and guidance to maintain quality and consistency</li>
          <li>Collaborated closely with gameplay and tech to align visual direction with gameplay and performance goals</li>
          <li>Balanced hands-on production with broader leadership responsibilities</li>
        </ul>
      </div>
    </section>

    <!-- Section 7: Optimization -->
    <section id="optimization" class="snap-section section-optimization">
      <div class="section-content">
        <h2>Optimization</h2>
        <p class="section-intro">
          Visual quality and optimization are treated as inseparable throughout my production workflow.
        </p>
        <div class="optimization-grid">
          <div class="optimization-card">
            <p>Implemented aggressive level streaming strategies to support large, model heavy environments</p>
          </div>
          <div class="optimization-card">
            <p>Use of shader-driven materials to reduce texture memory and draw calls</p>
          </div>
          <div class="optimization-card">
            <p>Environment kitbashing in engine to maximize asset reuse</p>
          </div>
        </div>
      </div>
    </section>

  </main>
</BaseLayout>

<style>
  /* Snap Container */
  .snap-container {
    height: 100vh;
    overflow-y: auto;
    scroll-snap-type: y mandatory;
  }

  .snap-container.snap-disabled {
    scroll-snap-type: none;
  }

  @media (max-width: 768px) {
    .snap-container {
      scroll-snap-type: none;
      height: auto;
      overflow-y: visible;
    }
  }

  /* Snap Sections */
  .snap-section {
    min-height: 100vh;
    scroll-snap-align: start;
    scroll-snap-stop: always;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    padding: var(--spacing-lg);
    padding-top: calc(64px + var(--spacing-lg));
  }

  @media (max-width: 768px) {
    .snap-section {
      min-height: auto;
      padding: var(--spacing-xl) var(--spacing-md);
      padding-top: calc(64px + var(--spacing-md));
    }
  }

  /* Section Hero */
  .section-hero {
    text-align: center;
  }

  .section-bg {
    position: absolute;
    inset: 0;
    z-index: -2;
  }

  .section-bg img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .section-overlay {
    position: absolute;
    inset: 0;
    z-index: -1;
    background: linear-gradient(
      to bottom,
      rgba(14, 15, 17, 0.6) 0%,
      rgba(14, 15, 17, 0.4) 50%,
      rgba(14, 15, 17, 0.8) 100%
    );
  }

  .section-content {
    max-width: var(--content-width);
    width: 100%;
  }

  .project-label {
    display: inline-block;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: var(--spacing-sm);
  }

  .section-hero h1 {
    margin-bottom: var(--spacing-md);
    text-shadow: 0 2px 20px rgba(0, 0, 0, 0.5);
  }

  .project-roles {
    font-size: var(--font-size-lg);
    color: var(--text-primary);
    opacity: 0.9;
  }

  /* Section About Project */
  .section-about-project {
    background-color: var(--bg-primary);
    min-height: auto;
    padding-top: var(--spacing-xl);
    padding-bottom: var(--spacing-xl);
  }

  .about-project-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-2xl);
    max-width: var(--max-width);
    width: 100%;
    align-items: center;
  }

  .about-project-text h2 {
    margin-bottom: var(--spacing-md);
  }

  .about-project-text p {
    font-size: var(--font-size-lg);
    color: var(--text-secondary);
    line-height: var(--line-height-relaxed);
  }

  .about-project-text p + p {
    margin-top: var(--spacing-sm);
  }

  .about-project-stats {
    display: flex;
    justify-content: space-around;
    gap: var(--spacing-lg);
  }

  .stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .stat-value {
    font-size: clamp(1.25rem, 2.5vw, 1.5rem);
    font-weight: var(--font-weight-bold);
    color: var(--text-primary);
    text-transform: uppercase;
    letter-spacing: 0.02em;
    line-height: 1.2;
    margin-bottom: var(--spacing-xs);
  }

  .stat-label {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  @media (max-width: 768px) {
    .about-project-content {
      grid-template-columns: 1fr;
      gap: var(--spacing-xl);
    }

    .about-project-stats {
      justify-content: space-between;
    }
  }

  /* Section Split */
  .section-split {
    background-color: var(--bg-secondary);
    min-height: auto;
    padding-top: var(--spacing-xl);
    padding-bottom: var(--spacing-xl);
  }

  .split-content {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--spacing-xl);
    max-width: var(--max-width);
    width: 100%;
    align-items: center;
  }

  .split-text h2 {
    margin-bottom: var(--spacing-md);
  }

  .responsibility-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
  }

  .responsibility-list li {
    font-size: var(--font-size-lg);
    color: var(--text-secondary);
    padding-left: var(--spacing-md);
    position: relative;
  }

  .responsibility-list li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.6em;
    width: 8px;
    height: 2px;
    background-color: var(--text-muted);
  }

  .split-image {
    border-radius: var(--radius-md);
    overflow: hidden;
  }

  .split-image img {
    width: 100%;
    height: auto;
  }

  .split-video {
    border-radius: var(--radius-md);
    overflow: hidden;
  }

  .split-video video {
    width: 100%;
    height: auto;
    display: block;
  }

  @media (max-width: 768px) {
    .split-content {
      grid-template-columns: 1fr;
    }

    .split-image {
      order: -1;
    }
  }

  /* Section Gallery */
  .section-gallery {
    background-color: var(--bg-primary);
  }

  .section-subtitle {
    font-size: var(--font-size-base);
    color: var(--text-muted);
    margin-bottom: var(--spacing-lg);
  }

  .gallery-placeholder {
    background-color: var(--bg-secondary);
    border-radius: var(--radius-md);
    padding: var(--spacing-xl);
    text-align: center;
    margin-bottom: var(--spacing-lg);
  }

  .gallery-placeholder p {
    font-size: var(--font-size-xl);
    color: var(--text-muted);
    margin-bottom: var(--spacing-sm);
  }

  .placeholder-note {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    opacity: 0.7;
  }

  .section-details h3 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-sm);
  }

  .section-details ul {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  .section-details li {
    color: var(--text-secondary);
    padding-left: var(--spacing-md);
    position: relative;
  }

  .section-details li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.6em;
    width: 6px;
    height: 2px;
    background-color: var(--text-muted);
  }

  /* Section Environments */
  .section-environments {
    background-color: var(--bg-secondary);
    flex-direction: column;
    gap: 0;
  }

  .env-gallery {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    gap: var(--spacing-sm);
    width: 100%;
    max-width: var(--max-width);
  }

  .env-image {
    border-radius: var(--radius-md);
    overflow: hidden;
  }

  .env-image.large {
    grid-row: span 2;
  }

  .env-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .env-content {
    text-align: center;
    max-width: var(--content-width);
  }

  .env-content h2 {
    margin-bottom: var(--spacing-md);
  }

  .section-description {
    font-size: var(--font-size-lg);
    color: var(--text-secondary);
    line-height: var(--line-height-relaxed);
    max-width: 800px;
  }

  .collaboration-list {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-sm);
    max-width: 800px;
  }

  .collaboration-list li {
    font-size: var(--font-size-lg);
    color: var(--text-secondary);
    line-height: var(--line-height-relaxed);
    padding-left: var(--spacing-md);
    position: relative;
  }

  .collaboration-list li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0.55em;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: var(--text-muted);
  }

  .section-compact {
    min-height: auto;
    padding-top: var(--spacing-lg);
    padding-bottom: var(--spacing-xl);
  }

  .env-hero-image {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    margin-top: var(--spacing-md);
  }

  .env-hero-image img {
    width: 100%;
    height: auto;
    display: block;
  }

  .env-hero-video {
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    margin-top: var(--spacing-md);
  }

  .env-hero-video video {
    width: 100%;
    height: auto;
    display: block;
  }

  .env-image-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    width: 100vw;
    margin-left: calc(-50vw + 50%);
    margin-top: 10px;
  }

  .env-image-half img {
    width: 100%;
    height: auto;
    display: block;
  }

  .env-archive-link {
    width: 100%;
    text-align: right;
    margin-top: var(--spacing-sm);
    padding-right: 140px;
  }

  .env-archive-link a {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    transition: color var(--transition-fast);
  }

  .env-archive-link a:hover {
    color: var(--text-primary);
  }

  @media (max-width: 768px) {
    .env-image-row {
      grid-template-columns: 1fr;
    }
  }

  .env-content ul {
    display: flex;
    justify-content: center;
    gap: var(--spacing-md);
    flex-wrap: wrap;
    margin-top: var(--spacing-md);
  }

  .env-content li {
    color: var(--text-secondary);
  }

  @media (max-width: 768px) {
    .env-gallery {
      grid-template-columns: 1fr;
    }

    .env-image.large {
      grid-row: auto;
    }

    .env-content ul {
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-xs);
    }
  }

  /* Section Optimization */
  .section-optimization {
    background-color: var(--bg-primary);
    min-height: auto;
    padding-top: var(--spacing-lg);
    padding-bottom: var(--spacing-xl);
  }

  .section-optimization h2 {
    text-align: center;
    margin-bottom: var(--spacing-md);
  }

  .section-intro {
    font-size: var(--font-size-lg);
    color: var(--text-secondary);
    max-width: 600px;
    margin: 0 auto var(--spacing-lg);
    text-align: center;
  }

  .optimization-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--spacing-md);
  }

  .optimization-card {
    background-color: var(--bg-secondary);
    padding: var(--spacing-md);
    border-radius: var(--radius-md);
  }

  .optimization-card h3 {
    font-size: var(--font-size-base);
    margin-bottom: var(--spacing-sm);
    color: var(--text-primary);
  }

  .optimization-card ul {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  .optimization-card li {
    font-size: var(--font-size-sm);
    color: var(--text-secondary);
  }

  @media (max-width: 768px) {
    .optimization-grid {
      grid-template-columns: 1fr;
    }
  }

  /* Section Credits */
  .section-credits {
    background-color: var(--bg-secondary);
    text-align: center;
  }

  .credits-info {
    display: flex;
    justify-content: center;
    gap: var(--spacing-xl);
    margin: var(--spacing-lg) 0;
    flex-wrap: wrap;
  }

  .credit-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
  }

  .credit-label {
    font-size: var(--font-size-sm);
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .credit-value {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
  }

  .credits-reflection {
    max-width: 600px;
    margin: var(--spacing-lg) auto;
    text-align: left;
  }

  .credits-reflection h3 {
    font-size: var(--font-size-lg);
    margin-bottom: var(--spacing-sm);
  }

  .credits-reflection p {
    color: var(--text-secondary);
    line-height: var(--line-height-relaxed);
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .snap-container {
      scroll-snap-type: none;
    }
  }
</style>
